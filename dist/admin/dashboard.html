<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - TechFest 2025</title>
    <link rel="stylesheet" href="../assets/css/style-new.css">
    <link rel="stylesheet" href="../assets/css/admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="admin-body">
    <!-- Admin Navigation -->
    <nav class="admin-nav">
        <div class="admin-nav-brand">
            <i class="fas fa-cog"></i>
            <span>Admin Panel</span>
        </div>
        <div class="admin-nav-user">
            <div class="user-info">
                <span id="admin-email">admin@techfest.demo</span>
                <i class="fas fa-user-circle"></i>
            </div>
            <button class="btn btn-secondary btn-sm" onclick="signOut()">
                <i class="fas fa-sign-out-alt"></i>
                Sign Out
            </button>
        </div>
    </nav>

    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <ul class="sidebar-menu">
                <li class="menu-item active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </li>
                <li class="menu-item" data-tab="site-config">
                    <i class="fas fa-cog"></i>
                    <span>Site Configuration</span>
                </li>
                <li class="menu-item" data-tab="events">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Events</span>
                </li>
                <li class="menu-item" data-tab="coordinators">
                    <i class="fas fa-users"></i>
                    <span>Coordinators</span>
                </li>
                <li class="menu-item" data-tab="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </li>
            </ul>
            <div class="sidebar-footer">
                <a href="../index.html" class="btn btn-outline btn-full">
                    <i class="fas fa-external-link-alt"></i>
                    View Site
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="admin-tab active">
                <div class="tab-header">
                    <h1>Dashboard</h1>
                    <p>Overview of your TechFest website</p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-events">0</h3>
                            <p>Total Events</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-views">0</h3>
                            <p>Page Views</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-coordinators">0</h3>
                            <p>Coordinators</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-prizes">â‚¹0</h3>
                            <p>Total Prizes</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="dashboard-section">
                    <h2>Quick Actions</h2>
                    <div class="quick-actions">
                        <button class="action-btn" onclick="switchTab('events'); showAddEventModal()">
                            <i class="fas fa-plus"></i>
                            <span>Add New Event</span>
                        </button>
                        <button class="action-btn" onclick="switchTab('coordinators'); showAddCoordinatorModal()">
                            <i class="fas fa-user-plus"></i>
                            <span>Add Coordinator</span>
                        </button>
                        <button class="action-btn" onclick="switchTab('site-config')">
                            <i class="fas fa-edit"></i>
                            <span>Update Site Info</span>
                        </button>
                        <button class="action-btn" onclick="window.open('../index.html', '_blank')">
                            <i class="fas fa-external-link-alt"></i>
                            <span>View Live Site</span>
                        </button>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="dashboard-section">
                    <h2>Recent Activity</h2>
                    <div id="recent-activity" class="activity-list">
                        <div class="activity-item">
                            <i class="fas fa-info-circle"></i>
                            <span>Welcome to the admin panel! Start by configuring your site settings.</span>
                            <time>Just now</time>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Site Configuration Tab -->
            <div id="site-config-tab" class="admin-tab">
                <div class="tab-header">
                    <h1>Site Configuration</h1>
                    <p>Manage your website's basic information and settings</p>
                </div>

                <form id="site-config-form" class="admin-form">
                    <div class="form-section">
                        <h3>Basic Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="college-name" class="form-label">College Name</label>
                                <input type="text" id="college-name" name="collegeName" class="form-input" placeholder="Enter college name">
                            </div>
                            <div class="form-group">
                                <label for="organizing-association" class="form-label">Organizing Association</label>
                                <input type="text" id="organizing-association" name="organizingAssociation" class="form-input" placeholder="Enter organizing association">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Hero Section</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="hero-title" class="form-label">Main Title</label>
                                <input type="text" id="hero-title" name="heroTitle" class="form-input" placeholder="Enter hero title">
                            </div>
                            <div class="form-group">
                                <label for="hero-subtitle" class="form-label">Subtitle</label>
                                <input type="text" id="hero-subtitle" name="heroSubtitle" class="form-input" placeholder="Enter hero subtitle">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="hero-description" class="form-label">Description</label>
                            <textarea id="hero-description" name="heroDescription" class="form-textarea" placeholder="Enter hero description" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="hero-badge-text" class="form-label">Badge Text</label>
                            <input type="text" id="hero-badge-text" name="heroBadgeText" class="form-input" placeholder="Enter badge text">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Event Details</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="techfest-name" class="form-label">TechFest Name</label>
                                <input type="text" id="techfest-name" name="techfestName" class="form-input" placeholder="e.g., TechCarvaan 2025">
                            </div>
                            <div class="form-group">
                                <label for="techfest-theme" class="form-label">Theme</label>
                                <input type="text" id="techfest-theme" name="techfestTheme" class="form-input" placeholder="e.g., Future Tech Revolution">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-dates" class="form-label">Event Dates</label>
                                <input type="text" id="event-dates" name="eventDates" class="form-input" placeholder="e.g., March 15-20, 2025">
                            </div>
                            <div class="form-group">
                                <label for="venue" class="form-label">Venue</label>
                                <input type="text" id="venue" name="venue" class="form-input" placeholder="e.g., GCOEJ Campus, Jalgaon">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="tagline" class="form-label">Tagline</label>
                            <input type="text" id="tagline" name="tagline" class="form-input" placeholder="e.g., Innovation & Excellence">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Statistics</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="events-count-admin" class="form-label">Events Count</label>
                                <input type="number" id="events-count-admin" name="eventsCount" class="form-input" placeholder="e.g., 12">
                            </div>
                            <div class="form-group">
                                <label for="participants-count-admin" class="form-label">Participants Count</label>
                                <input type="number" id="participants-count-admin" name="participantsCount" class="form-input" placeholder="e.g., 500">
                            </div>
                            <div class="form-group">
                                <label for="colleges-count-admin" class="form-label">Colleges Count</label>
                                <input type="number" id="colleges-count-admin" name="collegesCount" class="form-input" placeholder="e.g., 50">
                            </div>
                        </div>
                        <div class="form-group">
                            <button type="button" id="sync-stats-btn" class="btn btn-secondary" onclick="syncStatsToConfig()">
                                <i class="fas fa-sync-alt"></i> Auto-Sync Stats from Actual Data
                            </button>
                            <small class="form-hint">Automatically updates counts based on actual events and coordinators in database</small>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Contact Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contact-college" class="form-label">College Name</label>
                                <input type="text" id="contact-college" name="contactCollege" class="form-input" placeholder="Enter college name">
                            </div>
                            <div class="form-group">
                                <label for="contact-organization" class="form-label">Organization</label>
                                <input type="text" id="contact-organization" name="contactOrganization" class="form-input" placeholder="Enter organization name">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contact-phone" class="form-label">Phone</label>
                                <input type="tel" id="contact-phone" name="contactPhone" class="form-input" placeholder="Enter phone number">
                            </div>
                            <div class="form-group">
                                <label for="contact-email" class="form-label">Email</label>
                                <input type="email" id="contact-email" name="contactEmail" class="form-input" placeholder="Enter email address">
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="loadSiteConfig()">
                            <i class="fas fa-undo"></i>
                            Reset
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>

            <!-- Events Tab -->
            <div id="events-tab" class="admin-tab">
                <div class="tab-header">
                    <h1>Events Management</h1>
                    <p>Create, edit, and manage your events</p>
                    <button class="btn btn-primary" onclick="showAddEventModal()">
                        <i class="fas fa-plus"></i>
                        Add New Event
                    </button>
                </div>

                <div class="events-container">
                    <div class="events-filters">
                        <div class="filter-group">
                            <label for="events-search" class="form-label">Search Events</label>
                            <input type="text" id="events-search" class="form-input" placeholder="Search by title or category">
                        </div>
                        <div class="filter-group">
                            <label for="events-category" class="form-label">Category</label>
                            <input id="events-category" class="form-input" type="text" placeholder="Filter by category (free text)">
                        </div>
                        <div class="filter-group">
                            <label for="events-status" class="form-label">Status</label>
                            <select id="events-status" class="form-select">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                    </div>

                    <div id="events-list" class="events-list">
                        <!-- Events will be loaded here -->
                        <div class="loading-skeleton">
                            <div class="skeleton-event"></div>
                            <div class="skeleton-event"></div>
                            <div class="skeleton-event"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coordinators Tab -->
            <div id="coordinators-tab" class="admin-tab">
                <div class="tab-header">
                    <h1>Coordinators Management</h1>
                    <p>Manage event coordinators and their information</p>
                    <button class="btn btn-primary" onclick="showAddCoordinatorModal()">
                        <i class="fas fa-user-plus"></i>
                        Add New Coordinator
                    </button>
                </div>

                <div id="coordinators-list" class="coordinators-grid">
                    <!-- Coordinators will be loaded here -->
                    <div class="loading-skeleton">
                        <div class="skeleton-coordinator"></div>
                        <div class="skeleton-coordinator"></div>
                        <div class="skeleton-coordinator"></div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics-tab" class="admin-tab">
                <div class="tab-header">
                    <h1>Analytics</h1>
                    <p>Monitor your website performance and engagement</p>
                </div>

                <div class="analytics-section">
                    <h2>Coming Soon</h2>
                    <p>Analytics features will be available in future updates. This section will include:</p>
                    <ul>
                        <li>Page view statistics</li>
                        <li>Event registration tracking</li>
                        <li>User engagement metrics</li>
                        <li>Popular events analysis</li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <!-- Event Modal -->
    <div id="event-modal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="event-modal-title">Add New Event</h3>
                <button class="modal-close" onclick="closeEventModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="event-form">
                    <input type="hidden" id="event-id">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="event-title" class="form-label">Event Title</label>
                            <input type="text" id="event-title" name="title" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="event-category" class="form-label">Category</label>
                            <input type="text" id="event-category" name="category" class="form-input" placeholder="e.g., Hackathon, Robotics, Open Theme" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="event-short-description" class="form-label">Short Description</label>
                        <input type="text" id="event-short-description" name="shortDescription" class="form-input" maxlength="150" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="event-description" class="form-label">Detailed Description</label>
                        <textarea id="event-description" name="description" class="form-textarea" rows="4" required></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="event-prize" class="form-label">Prize Money</label>
                            <input type="text" id="event-prize" name="prize" class="form-input" placeholder="e.g., â‚¹15,000">
                        </div>
                        <div class="form-group">
                            <label for="event-date" class="form-label">Event Date</label>
                            <input type="text" id="event-date" name="date" class="form-input" placeholder="e.g., March 15, 2025">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="event-registration-link" class="form-label">Registration Link</label>
                        <input type="url" id="event-registration-link" name="registrationLink" class="form-input" placeholder="https://forms.google.com/...">
                    </div>
                    
                    <div class="form-group">
                        <label for="event-participation-fee" class="form-label">Participation Fee</label>
                        <input type="text" id="event-participation-fee" name="participationFee" class="form-input" placeholder="e.g., Free, â‚¹50 per person, â‚¹100 per team">
                        <small class="form-hint">Specify participation fee (Free, amount per person/team)</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="event-team-requirements" class="form-label">Team Requirements</label>
                        <input type="text" id="event-team-requirements" name="teamRequirements" class="form-input" placeholder="e.g., 2-4 members, Individual participation, Team of 3-5">
                        <small class="form-hint">Specify team size requirements or participation type (Individual, Team of 2-4, etc.)</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Event Coordinators</label>
                        <div id="coordinators-container">
                            <div class="coordinator-item">
                                <div class="coordinator-fields">
                                    <input type="text" class="form-input coordinator-name" placeholder="Coordinator Name">
                                    <input type="tel" class="form-input coordinator-phone" placeholder="Phone Number">
                                    <input type="email" class="form-input coordinator-email" placeholder="Email Address">
                                    <input type="text" class="form-input coordinator-role" placeholder="Role (e.g., Event Coordinator)">
                                </div>
                                <button type="button" class="btn btn-sm btn-danger" onclick="removeCoordinator(this)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm btn-secondary" onclick="addCoordinator()">
                            <i class="fas fa-plus"></i>
                            Add Coordinator
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Rules & Guidelines</label>
                        <div id="rules-container">
                            <div class="rule-item">
                                <input type="text" class="form-input rule-input" placeholder="Enter a rule">
                                <button type="button" class="btn btn-sm btn-danger" onclick="removeRule(this)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm btn-secondary" onclick="addRule()">
                            <i class="fas fa-plus"></i>
                            Add Rule
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="event-active" name="active" checked>
                            <span class="checkbox-custom"></span>
                            Active (visible on website)
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeEventModal()">
                    Cancel
                </button>
                <button type="button" class="btn btn-primary" onclick="saveEvent()">
                    <i class="fas fa-save"></i>
                    Save Event
                </button>
            </div>
        </div>
    </div>

    <!-- Coordinator Modal -->
    <div id="coordinator-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="coordinator-modal-title">Add New Coordinator</h3>
                <button class="modal-close" onclick="closeCoordinatorModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="coordinator-form">
                    <input type="hidden" id="coordinator-id">
                    <div class="form-group">
                        <label for="coordinator-name" class="form-label">Full Name</label>
                        <input type="text" id="coordinator-name" name="name" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="coordinator-role" class="form-label">Role/Position</label>
                        <input type="text" id="coordinator-role" name="role" class="form-input" placeholder="e.g., Event Coordinator">
                    </div>
                    <div class="form-group">
                        <label for="coordinator-phone" class="form-label">Phone Number</label>
                        <input type="tel" id="coordinator-phone" name="phone" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="coordinator-email" class="form-label">Email Address</label>
                        <input type="email" id="coordinator-email" name="email" class="form-input">
                    </div>
                </form>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeCoordinatorModal()">
                    Cancel
                </button>
                <button type="button" class="btn btn-primary" onclick="saveCoordinator()">
                    <i class="fas fa-save"></i>
                    Save Coordinator
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3>Confirm Delete</h3>
                <button class="modal-close" onclick="closeDeleteModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="delete-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>Are you sure you want to delete this item? This action cannot be undone.</p>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeDeleteModal()">
                    Cancel
                </button>
                <button type="button" class="btn btn-danger" onclick="confirmDelete()">
                    <i class="fas fa-trash"></i>
                    Delete
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loader"></div>
    </div>

    <!-- Firebase Config -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    
    <!-- Generated Environment Config -->
    <script src="assets/js/env-config.generated.js"></script>
    
    <!-- Environment Variables Loader -->
    <script src="../assets/js/env-loader.js"></script>
    
    <script src="../assets/js/firebase-config.js"></script>
    <script src="../assets/js/admin-dashboard.js"></script>
    <!-- Mouse Trail Effect 
    <script src="../assets/js/mouse-trail.js"></script> -->
</body>
</html>